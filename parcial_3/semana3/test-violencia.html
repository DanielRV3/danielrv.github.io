<html lang="es">
<head>
    <title>Bienvenida del usuario</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <script type="text/javascript" src="../js/jquery/jquery-1.7.1.min.js"></script>
    <script type="text/javascript" src="../js/jquery/jquery-ui-1.8.17.custom.min.js"></script>
    <script type="text/javascript" src="../jspdf.js"></script>

    <script type="text/javascript" src="../jspdf.plugin.standard_fonts_metrics.js"></script>
    <script type="text/javascript" src="../jspdf.plugin.split_text_to_size.js"></script>
    <script type="text/javascript" src="../jspdf.plugin.from_html.js"></script>

    <style>
        form div{
            border: #68696e solid 1px;
            border-radius: 6px;
        }
    </style>
</head>
<body>
<div class="container-fluid">
    <h1 class="mb-4">TEST PARA MEDIR EL NIVEL DE RIESGO DE VIOLENCIA PARA MUJERES EN EL ESTADO DE SLP</h1>
    <h4>INSTRUCCIONES: Lee cuidadosamente y responde una sola opción</h4>
    <div class="row">
        <div class="col-lg-6">
            <form id="myform" onsubmit="return resultados();" action="javascript:void(0)">
                <div class="my-3 p-2">
                    <label for="nombre" class="form-label">Nombre:</label>
                    <input type="text" name="nombre" id="nombre" class="form-control" placeholder="Escribe tu nombre">
                </div>

                <div class="my-3 p-2">
                    <p>1.- Dentro de tu núcleo familiar (padre, madre, hermanos), ¿En algún momento vivieron violencia (amenazas, gritos, golpes)?</p>
                    <label class="form-check-label">SI<input class="form-check-input" name="p1" type="radio" value=3></label>
                    <label class="form-check-label">A VECES<input class="form-check-input" name="p1" type="radio" value=2></label>
                    <label class="form-check-label">RARA VEZ<input class="form-check-input" name="p1" type="radio" value=1></label>
                    <label class="form-check-label">NO<input class="form-check-input" name="p1" type="radio"  value=0 checked></label>
                </div>

                <div class="my-3 p-2">
                    <p>2.-¿Tu pareja te cela?</p>
                    <label class="form-check-label">SI<input class="form-check-input" name="p2" type="radio" value=3></label>
                    <label class="form-check-label">A VECES<input class="form-check-input" name="p2" type="radio" value=2></label>
                    <label class="form-check-label">RARA VEZ<input class="form-check-input" name="p2" type="radio" value=1></label>
                    <label class="form-check-label">NO<input class="form-check-input" name="p2" type="radio" value=0 checked></label>
                </div>

                <div class="my-3 p-2">
                    <p>3.-¿Has sufrido descalificaciones o humillaciones en público por parte de tu pareja?</p>
                    <label class="form-check-label">SI<input class="form-check-input"  name="p3" type="radio" value=3></label>
                    <label class="form-check-label">A VECES<input class="form-check-input"  name="p3" type="radio" value=2></label>
                    <label class="form-check-label">RARA VEZ<input class="form-check-input"  name="p3" type="radio" value=1></label>
                    <label class="form-check-label">NO<input class="form-check-input"  name="p3" type="radio" value=0 checked></label>
                </div>

                <div class="my-3 p-2">
                    <p>4.-¿Tu pareja te responsabiliza de los problemas que tienen?</p>
                    <label class="form-check-label">SI<input class="form-check-input"  name="p4" type="radio" value=3></label>
                    <label class="form-check-label">A VECES<input class="form-check-input"  name="p4" type="radio" value=2></label>
                    <label class="form-check-label">RARA VEZ<input class="form-check-input"  name="p4" type="radio" value=1></label>
                    <label class="form-check-label">NO<input class="form-check-input"  name="p4" type="radio" value=0 checked></label>
                </div>

                <div class="my-3 p-2">
                    <p>5.-¿Te controla, todo el tiempo o quiere saber dónde estás?</p>
                    <label class="form-check-label">SI<input class="form-check-input"  name="p5" type="radio" value=3></label>
                    <label class="form-check-label">A VECES<input class="form-check-input"  name="p5" type="radio" value=2></label>
                    <label class="form-check-label">RARA VEZ<input class="form-check-input"  name="p5" type="radio" value=1></label>
                    <label class="form-check-label">NO<input class="form-check-input"  name="p5" type="radio" value=0 checked></label>
                </div>

                <div class="my-3 p-2">
                    <p>6.-¿Te chantajea, manipula o soborna para hacer cosas?</p>
                    <label class="form-check-label">SI<input class="form-check-input"  name="p6" type="radio" value=3></label>
                    <label class="form-check-label">A VECES<input class="form-check-input"  name="p6" type="radio" value=2></label>
                    <label class="form-check-label">RARA VEZ<input class="form-check-input"  name="p6" type="radio" value=1></label>
                    <label class="form-check-label">NO<input class="form-check-input"  name="p6" type="radio" value=0 checked></label>
                </div>

                <div class="my-3 p-2">
                    <p>7.-¿Te limita o prohibe hacer cosas?</p>
                    <label class="form-check-label">SI<input class="form-check-input"  name="p7" type="radio" value=3></label>
                    <label class="form-check-label">A VECES<input class="form-check-input"  name="p7" type="radio" value=2></label>
                    <label class="form-check-label">RARA VEZ<input class="form-check-input"  name="p7" type="radio" value=1></label>
                    <label class="form-check-label">NO<input class="form-check-input"  name="p7" type="radio" value=0 checked></label>
                </div>

                <div class="my-3 p-2">
                    <p>8.-¿Te controla o limita el recurso económico, o amenaza con quitártelo a ti y tus hijos?</p>
                    <label class="form-check-label">SI<input class="form-check-input"  name="p8" type="radio" value=3></label>
                    <label class="form-check-label">A VECES<input class="form-check-input"  name="p8" type="radio" value=2></label>
                    <label class="form-check-label">RARA VEZ<input class="form-check-input"  name="p8" type="radio" value=1></label>
                    <label class="form-check-label">NO<input class="form-check-input"  name="p8" type="radio" value=0 checked></label>
                </div>

                <div class="my-3 p-2">
                    <p>9.-Durante las discusiones, ¿tu pareja se pone violenta y ha destruido objetos?</p>
                    <label class="form-check-label">SI<input class="form-check-input"  name="p9" type="radio" value=3></label>
                    <label class="form-check-label">A VECES<input class="form-check-input"  name="p9" type="radio" value=2></label>
                    <label class="form-check-label">RARA VEZ<input class="form-check-input"  name="p9" type="radio" value=1></label>
                    <label class="form-check-label">NO<input class="form-check-input"  name="p9" type="radio" value=0 checked></label>
                </div>

                <div class="my-3 p-2">
                    <p>10.-¿Tu pareja te obliga a tener relaciones sexuales sin tu consentimiento o sin protección?</p>
                    <label class="form-check-label">SI<input class="form-check-input"  name="p10" type="radio" value=3></label>
                    <label class="form-check-label">A VECES<input class="form-check-input"  name="p10" type="radio" value=2></label>
                    <label class="form-check-label">RARA VEZ<input class="form-check-input"  name="p10" type="radio" value=1></label>
                    <label class="form-check-label">NO<input class="form-check-input"  name="p10" type="radio" value=0 checked></label>
                </div>

                <div class="my-3 p-2">
                    <p>11.-¿Tu pareja te acaricia violentamente?</p>
                    <label class="form-check-label">SI<input class="form-check-input"  name="p11" type="radio" value=3></label>
                    <label class="form-check-label">A VECES<input class="form-check-input"  name="p11" type="radio" value=2></label>
                    <label class="form-check-label">RARA VEZ<input class="form-check-input"  name="p11" type="radio" value=1></label>
                    <label class="form-check-label">NO<input class="form-check-input"  name="p11" type="radio" value=0 checked></label>
                </div>

                <div  class="my-3 p-2">
                    <p>12.-¿Cuándo discutes con tu pareja, te hace agresiones físicas (empujones, patadas, puñetazos, jalones, te azota) con alguna arma (blanca o fuego) que te dejan marcas?</p>
                    <label class="form-check-label">SI<input class="form-check-input"  name="p12" type="radio" value=3></label>
                    <label class="form-check-label">A VECES<input class="form-check-input"  name="p12" type="radio" value=2></label>
                    <label class="form-check-label">RARA VEZ<input class="form-check-input"  name="p12" type="radio" value=1></label>
                    <label class="form-check-label">NO<input class="form-check-input"  name="p12" type="radio" value=0 checked></label>
                </div>

                <div class="my-3 p-2">
                    <p>13.-¿Has recibido atención médica y/o psicológica por la violencia ejercida por tu pareja?</p>
                    <label class="form-check-label">SI<input class="form-check-input"  name="p13" type="radio" value=3></label>
                    <label class="form-check-label">A VECES<input class="form-check-input"  name="p13" type="radio" value=2></label>
                    <label class="form-check-label">RARA VEZ<input class="form-check-input"  name="p13" type="radio" value=1></label>
                    <label class="form-check-label">NO<input class="form-check-input"  name="p13" type="radio" value=0 checked></label>
                </div>

                <div class="my-3 p-2">
                    <p>14.-¿Hab¿as realizado denuncias anteriormente por violencia familiar, acoso laboral y/o sexual o lesiones?</p>
                    <label class="form-check-label">SI<input class="form-check-input"  name="p14" type="radio" value=3></label>
                    <label class="form-check-label">A VECES<input class="form-check-input"  name="p14" type="radio" value=2></label>
                    <label class="form-check-label">RARA VEZ<input class="form-check-input"  name="p14" type="radio" value=1></label>
                    <label class="form-check-label">NO<input class="form-check-input"  name="p14" type="radio" value=0 checked></label>
                </div>

                <div class="my-3 p-2">
                    <p>15.-¿Debido a la violencia decidiste separarte o terminar la relación?</p>
                    <label class="form-check-label">SI<input class="form-check-input"  name="p15" type="radio" value=3></label>
                    <label class="form-check-label">A VECES<input class="form-check-input"  name="p15" type="radio" value=2></label>
                    <label class="form-check-label">RARA VEZ<input class="form-check-input"  name="p15" type="radio" value=1></label>
                    <label class="form-check-label">NO<input class="form-check-input"  name="p15" type="radio" value=0 checked></label>
                </div>

                <div class="my-3 p-2">
                    <p>16.-¿Seguiste con el proceso de tu denunca o la retiraste?</p>
                    <label class="form-check-label">SI<input class="form-check-input"  name="p16" type="radio" value=3></label>
                    <label class="form-check-label">A VECES<input class="form-check-input"  name="p16" type="radio" value=2></label>
                    <label class="form-check-label">RARA VEZ<input class="form-check-input"  name="p16" type="radio" value=1></label>
                    <label class="form-check-label">NO<input class="form-check-input"  name="p16" type="radio" value=0 checked></label>
                </div>

                <div class="my-3 p-2">
                    <p>17.-¿Por qué motivo retiraste la denuncia?</p>
                    <label class="form-check-label">AMOR<input class="form-check-input"  name="p17" type="radio" value=3></label>
                    <label class="form-check-label">AMENAZAS<input class="form-check-input"  name="p17" type="radio" value=2></label>
                    <label class="form-check-label">MIEDO<input class="form-check-input"  name="p17" type="radio" value=1></label>
                    <label class="form-check-label">FALTA DE INTERÉS DE LAS AUTORIDADES<input class="form-check-input"  name="p17" type="radio" value=0 checked></label>
                </div>

                <div class="my-3 p-2">
                    <p>18.-Los episodios de violencia ¿son más frecuentes y extremos?</p>
                    <label class="form-check-label">SI<input class="form-check-input"  name="p18" type="radio" value=3></label>
                    <label class="form-check-label">A VECES<input class="form-check-input"  name="p18" type="radio" value=2></label>
                    <label class="form-check-label">RARA VEZ<input class="form-check-input"  name="p18" type="radio" value=1></label>
                    <label class="form-check-label">NO<input class="form-check-input"  name="p18" type="radio" value=0 checked></label>
                </div>

                <div class="my-3 p-2">
                    <p>19.-¿Has recibido hostigamiento constante o amenazas de muerte por parte de tu agresor?</p>
                    <label class="form-check-label">SI<input class="form-check-input"  name="p19" type="radio" value=3></label>
                    <label class="form-check-label">A VECES<input class="form-check-input"  name="p19" type="radio" value=2></label>
                    <label class="form-check-label">RARA VEZ<input class="form-check-input"  name="p19" type="radio" value=1></label>
                    <label class="form-check-label">NO<input class="form-check-input"  name="p19" type="radio" value=0 checked></label>
                </div>

                <div class="my-3 p-2">
                    <p>20.-¿Las autoridades emitieron medidas cautelares y de protección para salvaguardar tu integridad (y la de tus hijos)?</p>
                    <label class="form-check-label">SI<input class="form-check-input"  name="p20" type="radio" value=3></label>
                    <label class="form-check-label">A VECES<input class="form-check-input"  name="p20" type="radio" value=2></label>
                    <label class="form-check-label">RARA VEZ<input class="form-check-input"  name="p20" type="radio" value=1></label>
                    <label class="form-check-label">NO<input class="form-check-input"  name="p20" type="radio" value=0 checked></label>
                </div>

                <div class="my-3 p-2">
                    <p>21.-¿Tu agresor ya ha intentado matarte?</p>
                    <label class="form-check-label">SI<input class="form-check-input"  name="p21" type="radio" value=3></label>
                    <label class="form-check-label">A VECES<input class="form-check-input"  name="p21" type="radio" value=2></label>
                    <label class="form-check-label">RARA VEZ<input class="form-check-input"  name="p21" type="radio" value=1></label>
                    <label class="form-check-label">NO<input class="form-check-input"  name="p21" type="radio" value=0 checked></label>
                </div>
                <input type="submit" class="btn btn-primary">
            </form>
        </div>
        <div class="col-lg-6 d-flex justify-content-center">
            <iframe id="demo" width="500" height="750"></iframe>
        </div>
    </div>

</div>


    <script type = "text/javascript">
        function resultados() {
            let indice=0;
            let fase="";
            let nombre=document.forms[0].nombre.value;
            for (let i = 1; i <= 21; i++) {
                let char ="p"+i;
                indice+=parseInt(document.forms[0][char].value);
            }

            if(indice>=0 && indice<=12) fase="apertura";
            if(indice>=13 && indice<=24) fase="dominio";
            if(indice>=25 && indice<=36) fase="demostración";
            if(indice>=37 && indice<=48) fase="reconocimiento";
            if(indice>=49 && indice<=60) fase="riesgo inminente";
            if(indice>60) fase="consumación";

            generarPDF(indice, fase, nombre)
            return true;
        }
        function generarPDF(indice, fase, nombre){
            $(document).ready(function() {
                const doc = new jsPDF();

                doc.setFontSize(15);
                doc.text(10, 20, "TEST PARA MEDIR EL NIVEL DE RIESGO DE VIOLENCIA PARA MUJERES");
                doc.text(80, 30, "EN EL ESTADO DE SLP");
                doc.text(20, 75, "Nombre: "+nombre);
                doc.text(20, 80, "Según los resultados del test se encuentra en la fase de "+fase+",");
                doc.text(20, 85, "con una puntuación de "+ indice+".");


                //doc.addImage(imgData, 'JPEG', 10, 40, 180, 180);

                let string = doc.output('datauristring');

                $('iframe').attr('src', string);

            });
        }
    </script>

</body>
</html>